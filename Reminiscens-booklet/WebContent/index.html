<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!--
        20 Things I Learned About Browsers and the Web
        Built by Fi (www.f-i.com) for the Google Chrome Team.

        @author Hakim El Hattab
        @author Erik Kallevig
        @author Jon Gray
        -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="viewport" content="width = 1000">

        <link rel="image_src" href="./files/front-cover-old-bordered.jpg">

        <title>Reminiscens Booklet</title>

        <link rel="stylesheet" href="./css/reveal.css">
        <link type="text/css" href="./files/custom.css" rel="stylesheet">
        <link type="text/css" href="./files/twentythings.min.css" rel="stylesheet" media="screen">

        <link rel="stylesheet" type="text/css" href="shadowbox/shadowbox.css">

        <script type="text/javascript">
			document.write('<link rel="stylesheet" type="text/css" media="all" href="./files/hideOnLoad.css" />');
			if (window.location.hash.match('\/')) {
				window.location = window.location.protocol + '//' + window.location.hostname + ':' + window.location.port + window.location.hash.slice(1);
			}
			var SERVER_VARIABLES = {
				LANG : "it-IT",
				SOLID_BOOK_COLOR : "#272322"
			};
			// Set language for use by Google +1 button.
			window.___gcfg = {
				lang : SERVER_VARIABLES.LANG
			};
        </script><style type="text/css"></style>

        <script type="text/javascript" src="./files/twentythings.min.js?v=49"></script>

        <script src="./js/jquery.reveal.js" type="text/javascript"></script>

        <script src="http://maps.google.com/maps/api/js?sensor=false"></script>

        <script type="text/javascript">
			var maps = new Array();

			var mapInit = function(index, lat, lon, name) {

				var position = new google.maps.LatLng(lat, lon);

				var mapOptions = {
					center : position,
					scrollwheel : false,
					scaleControl : false,
					navigationControl : false,
					streetViewControl : false,
					zoom : 16,
					mapTypeId : google.maps.MapTypeId.HYBRID
				};

				maps[index] = new google.maps.Map(document.getElementsByClassName("map-canvas")[index], mapOptions);

				var marker = new google.maps.Marker({
					position : position,
					map : maps[index],
					title : name
				});

			}
			var mapResize = function(index) {
				if (maps[index - 2]) {
					var center = maps[index - 2].getCenter();
					google.maps.event.trigger(maps[index - 2], "resize");
					maps[index - 2].setCenter(center);
				}
			}

        </script>

        <script type="text/javascript">
			function geocode(place, callback) {
				var geocoder = new google.maps.Geocoder();

				if (geocoder) {
					geocoder.geocode({
						'address' : place
					}, function(results, status) {
						if (status == google.maps.GeocoderStatus.OK) {
							callback(results[0].geometry.location);
						} else {
							console.log("Geocoding failed: " + status);
							callback(null);
						}
					});
				}
			}
        </script>

        <script>
			function cut(n, text) {
				var short = text.substr(0, n);
				if (/^\S/.test(text.substr(n)))
					return short.replace(/\s+\S*$/, "");
				return short;
			}
        </script>

        <script type="text/javascript" src="shadowbox/shadowbox.js"></script>

        <link rel="stylesheet" type="text/css" media="all" href="files/hideOnLoad.css">

    </head>
    <body class="it-IT home" style="overflow-x: hidden; overflow-y: auto; background-image: url(files/backgroundprova.jpg);">

        <header style="width: 1280px;">

            <h1><a class="logo" href="http://www.reminiscens.me/"><img src="logo-reminiscens-title.png"></a></h1>
            <nav>
                <ul>
                    <li class="">
                        <a href="http://www.20thingsilearned.com/table-of-things">LIFEPARTICIPATION</a>
                    </li>
                    <li class="divider1"></li>
                    <li class="about">
                        <a href="http://www.20thingsilearned.com/foreword/1">UNITN</a>
                    </li>
                    <li class="divider2"></li>
                    <li class="credits">
                        <a href="http://www.20thingsilearned.com/credits">CREDITS</a>
                    </li>
                </ul>
            </nav>

            <!-- Input type="search" is currently too inconsistent across browsers and platforms -->
            <input id="search-field" type="hidden" value="Cerca nel libro">
        </header>

        <div id="book" style="left: -600px; top: 80px; margin: 0px; opacity: 1; display: block;">
            <div id="shadow">
                <div class="shadow-left"></div>
                <div class="shadow-right"></div>
            </div>
            <div id="spine">
                <div class="spine-top"></div>
                <div class="spine-bottom"></div>
            </div>

            <div id="front-cover" style="display: block;">
                <img src="./files/front-cover-old-bordered.jpg" width="830" height="520">
            </div>
            <div id="back-cover" style="display: none;">
                <img src="./files/back-cover-old.jpg" data-src-flipped="./files/back-cover-old-flipped.jpg" width="830" height="520">
            </div>
            <div id="page-shadow-overlay" style="opacity: 0.3; display: block;"></div>
            <div id="pages">

                <section class="template-start-7 title-foreword page-1 globalPage-1 current" style="z-index: 502; width: 800px; display: block;" id="1">
                    <div class="page">
                        <div class="page-title">
                            <h2>Introduzione</h2>
                        </div>
                        <div class="left">
                            <p class="drop-cap">
                                Tutti noi abbiamo ricordi, immagini più o meno impresse della nostra vita. Luoghi e tempi vicini e lontani, avvenimenti, suoni, persone.
                            </p>
                            <p class="drop-cap">
                                <br>
                            </p>
                            <p class="drop-cap">
                                <h1>Gira pagina per continuare.</h1>
                            </p>
                        </div>
                        <div class="right">
                            <p class="continuation">
                                Questo libro contiene immagini, eventi, personaggi e musica direttamente dai tuoi ricordi, sfoglialo e lasciati andare!
                            </p>
                        </div>
                        <span class="pageNumber">1</span>
                    </div>
                </section>
                <section class="template-3 title-theend page-1 globalPage-67" style="z-index: 1; display: none; width: 0px;" id="end">
                    <div class="page">
                        <div class="page-title">
                            <h2></h2>
                        </div><span class="pageNumber">end</span>
                    </div>
                </section>
            </div>
            <div id="left-page" style="width: 0px; display: none;">
                <img src="./files/left-page-old.jpg" data-src-flipped="./files/left-page-flipped-old.jpg" width="830" height="520">
            </div>
            <div id="right-page" style="">
                <div id="paperstack">
                    <div class="paper s1" style="opacity: 1;"></div>
                    <div class="paper s900" style="opacity: 1;"></div>
                    <div class="shadow" style="opacity: 1; margin-left: -2px;"></div>
                </div>
                <img src="./files/right-page-old.jpg" width="830" height="520">
            </div>
            <canvas id="pageflip" style="position: absolute; top: -80px; left: -20px; z-index: 0;" width="1700" height="680"></canvas>
        </div>

        <div id="credits" style="left: 320px; top: 85px; margin: 0px;">
            <div class="header">
                <h2><span>RISORSE</span></h2>
                <br>
                <h3><span>I dati qui proposti provengono da:</span></h3>
                <hr>
            </div>
            <div class="people">
                <ul>
                    <li>
                        <div style="margin-top: -10px;">
                            <a href="http://www.flickr.com"><img src="./img/flickr.png" /></a><h4>Immagini</h4>
                    </li>
                    <li>
                        <div style="margin-top: -10px;">
                            <a href="http://dbpedia.org"><img src="./img/dbpedia.png" /></a><h4>Dati su persone, eventi, musica e altro</h4>
                    </li>
                    <li>
                        <div style="margin-top: -10px;">
                            <a href="http://www.google.com"><img src="./img/google.png" /></a><h4>Mappe, Geocoding e Youtube</h4>
                    </li>
                    <li>
                        <div style="margin-top: -10px;">
                            <a href="http://dati.trentino.it"><img src="./img/opendata.png" /></a><h4>Dati su persone e altro</h4>
                    </li>
                    <li>
                        <div style="margin-top: -10px;">
                            <a href="http://www.catinabib.it"><img src="./img/catina.png" /></a><h4>Cartoline del Trentino</h4>
                    </li>
                </ul>
                <h4>Disclaimer</h4>
                <p class="special-thanks">
                    Il libro è basato su <a href="http://www.20thingsilearned.com">"20 things I learned about browsers and the web"</a>, pubblicato dal team di <a href="http://www.google.com/chrome?brand=CHJN">Google Chrome</a>, ©2010 Google Inc. Tutti i diritti riservati.
                    La pagina in questione e il progetto <a href="http://www.reminiscens.me">Reminiscens</a> non hanno scopo di lucro, e quindi non sono da considerarsi a fini commerciali.
                </p>
            </div>
            <hr>
            <div class="share">
                <p>
                    Mostra a amici e parenti questo libro!
                </p>
                <ul>
                    <li class="facebook">
                        <a href="http://www.facebook.com/sharer.php?u=http://20thingsilearned.com&t=20%20Things%20I%20learned%20About%20Browsers%20and%20the%20Web" title="Facebook"><span class="icon"></span><span class="text">Condividi su</span></a>
                    </li>
                </ul>
            </div>
        </div>

        <div id="pagination-prev" class="inactive" style="top: 320px; left: 0px;">
            <a href="">
            <div class="arrow" style="display: none;">
                LOCALE_PREVIOUS_PAGE
            </div></a>
        </div>
        <div id="pagination-next" class="" style="top: 320px; right: auto; left: 1238px;">
            <a href="">
            <div class="arrow" style="display: none;">
                LOCALE_NEXT_PAGE
            </div></a>
        </div>

        <footer style="width: 1280px; top: 655px; margin: 0px;"></footer>

        <div id="myModal" class="reveal-modal" style="z-index: 1900">
            <div id="form" style='text-align: left'>
                    Decade:
                <input type="number" id="decade" min="1900" max="2010"
                step="10" />
                <br />
                    Place:
                <input type="text" id="place" />
                       
                <input type="button" id="getData" value="Get Data" />
            </div>
        </div>

    </body>

    <script type="text/javascript" src="./files/plusone.js" gapi_processed="true"></script>

    <script type="text/javascript">
		    $(document).ready(function(){

		$('#myModal').reveal();

		TT.initialize();

		            $('#getData').click(function(){

		var decade = $("#decade").val();
		var place = $('#place').val();

		if (decade.match("^(18|19|20)[0-9]0$") && decade < "2050" && decade >= "1900") {

		$('#form').hide();
		$('#myModal').append('<img id="spinner" src="http://www.antonioeantoniocaserta.it/images/spinner.gif"/>');

		geocode(place, function(loc) {

		if (loc != null) {

		$.ajax({
		                    url:'booklet?decade='+decade+'&lat='+loc.lat()+'&lon='+loc.lng(),
		                    type:'post',
		                    dataType: 'json',
		                    success: function(data) {
		var mediaData = data[0];
		var eventsData = data[1];
		var worksData = data[2];
		var initialZindex = 501;
		var id = 1;
		var actualZindex = "";

		jQuery.each(mediaData.media, function(i,el) {
		id+=1;;
		actualZindex = initialZindex - id + 2 ;

		$("<section class='page-image template-start-6 title-foreword page-"+(i+2)+" globalPage-"+ id +"' style='z-index: "+ actualZindex +"; display: block; width: 800px;' id='"+ id +"'></section>").insertBefore('#end');
		$('section#'+ id).append("<div class='page'></div>");
		var page = $('#'+ id).find(".page");
		page.append("<div class='page-title'><h2>Immagini e fotografie</h2><h3>La memoria visiva è importante</h3>");
		page.append("<div class='left'></div>");
		page.append("<div class='right'></div>");

		if (i%2==0) {
		var photo = page.find('.left');
		var desc = page.find('.right');
		} else {
		var photo = page.find('.right');
		var desc = page.find('.left');
		}

		photo.css("text-align","center");
		photo.append("<a href='"+ el.url +"'  rel='shadowbox'> <img src='"+ el.url +"' width='200px' style='border: solid; border-color: black;' /></a>");

		desc.append("<p class='drop-cap'><h1>"+ el.title +"</h1></p>");

		if (el.location.textual) {
		desc.append("<p class='drop-cap'><h1>"+ el.location.textual +"</h1></p>");
		} else {
		desc.append("<p class='drop-cap'><h1>"+ el.location.name +"</h1></p>");
		}

		if (el.time.year) {
		desc.append("<p class='continuation'><h1>"+ el.time.year +"</h1></p>");
		} else {
		desc.append("<p class='continuation'><h1>Decennio "+ el.time.decade +"</h1></p>");
		}

		desc.append("<div class='map-canvas' style='border: solid; height: 200px; width: 250px;'></div>");

		if (el.location.textual) {
		mapInit(id-2,parseFloat(el.location.lat),parseFloat(el.location.lon),el.location.textual);
		} else {
		mapInit(id-2,parseFloat(el.location.lat),parseFloat(el.location.lon),el.location.name);
		}

		page.append("<span class='pageNumber'>"+ id +"</span>");

		$("<div class='paper s"+id+"' style='opacity: 1;'></div>").insertBefore('.s900');

		});

		jQuery.each(eventsData.events, function(i,el) {
		id+=1;;
		actualZindex = initialZindex - id + 2 ;

		$("<section class=' template-start-5 title-cloud-computing page-"+ (i+2) + " globalPage-" + id + "' style='z-index: " + actualZindex + "; display: block; width: 800px;' id='" + id + "'></section>").insertBefore('#end');
		$('section#'+ id).append("<div class='page'></div>");
		var page = $('#'+ id).find(".page");
		page.append("<div class='page-title'><h2>Eventi</h2>");
		page.append("<div class='left'></div>");
		page.append("<div class='right'></div>");

		var left = page.find('.left');
		var right = page.find('.right');

		left.append('<h3>' + el.headline + '</h3>');

		var text = el.text;
		var leftText = "";
		var rightText = "";
		var length = text.length;

		if (length > 685) {
		leftText = cut(685,text);
		rightText = text.substring(leftText.length);
		} else {
		rightText = text;
		}

		left.append("<p class='drop-cap'>"+ leftText +"</p>");
		right.append("<p class='continuation'>"+ rightText +"</p>");

		page.append("<span class='pageNumber'>"+ id +"</span>");

		$("<div class='paper s"+id+"' style='opacity: 1;'></div>").insertBefore('.s900');

		});

		jQuery.each(worksData.works, function(i,el) {
		id+=1;;
		actualZindex = initialZindex - id + 2 ;

		$("<section class='template-inner-3 title-old-vs-new-browsers page-"+ (i+2) + " globalPage-" + id + "' style='z-index: " + actualZindex + "; display: block; width: 800px;' id='" + id + "'></section>").insertBefore('#end');
		$('section#'+ id).append("<div class='page'></div>");
		var page = $('#'+ id).find(".page");
		page.append("<div class='page-title'><h2>Canzoni</h2><h3>Suoni del passato e del presente</h3>");

		page.append("<div class='song-body'></div>");

		var song = page.find('.song-body');

		song.append("<p class='drop-cap'><h3>"+ el.title +"</h3></p>");
		song.append("<p class='drop-cap'><h3>"+ el.author +"</h3></p>");
		song.append("<p class='drop-cap'>"+ el.description +"</h3>");

		var yVideo = el.resource_url;
		var questionIndex = yVideo.indexOf('?');

		var videoId = yVideo.substring(26,questionIndex);
		yVideo = "https://www.youtube.com/embed/" + videoId + "?html5=1";
		page.append("<div class='youtube-frame' style='padding-top: 20px;'><a rel='shadowbox' width=680; height=356; href='" + yVideo + "'>Apri il video</a></div>");

		page.append("<span class='pageNumber'>"+ id +"</span>");

		$("<div class='paper s"+id+"' style='opacity: 1;'></div>").insertBefore('.s900');

		});

		$('#end').attr("id", id);
		$('#end').find('.page-number').html(id+1);

		$('.s900').toggleClass('s900 s'+(id+1));

		$('#myModal').trigger('reveal:close');
		TT.paperstack.initialize();

		TT.pageflip.initialize();

		$('.arrow').show();

		Shadowbox.init({
		enableKeys : false
		});
		                    }
		                });
		} else {
		$('#myModal').find('img').remove();
		$('#form').show();
		alert("Il luogo inserito non è stato trovato. Riprova.");
		}
		});

		           
		} else {
		alert("Inserire una decade valida, compresa tra 1900 e 2050")
		}
		            });
		    });
    </script>

</html>